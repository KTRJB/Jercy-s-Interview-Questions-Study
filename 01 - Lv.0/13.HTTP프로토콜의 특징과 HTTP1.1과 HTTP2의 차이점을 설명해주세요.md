# HTTP 프로토콜의 특징과 HTTP/1.1과 HTTP/2의 차이점을 설명해주세요.
추가 질문

- HTTP의 무상태(Stateless) 성질은 무엇이며, 어떻게 극복하나요?
- HTTP/2에서 추가된 주요 기능은 무엇인가요?
- HTTP/3에서 추가된 기능은 무엇인가요?

## HTTP(Hypertext Transfer Protocol)

HTTP는 OSI 계층의 애플리케이션 계층 프로토콜입니다.

HTTP는 여러 유형의 요청과 응답을 정의할 수 있습니다. 
요청으로는 대표적으로 GET, POST, PATCH, PUT, DELETE가 있습니다.
응답은 200(정상), 400(잘못된 요청), 404(리소스 찾을 수 없음)이 있습니다.

HTTP는 기본적으로 클라이언트-서버 구조로 되어 있습니다.
클라이언트가 서버에 요청(Request)을 보내고, 서버는 클라이언트의 요청(Request)을 받아 로직을 수행한 후, 클리어언트에 응답(Response)를 하는 형태 입니다.

## HTTP - 메시지 구조

---

![image](https://github.com/user-attachments/assets/48e02011-189f-4c72-99d6-dc3d1d251760)

### Header

- 헤더에는 HTTP 전송에 필요한 모든 부가정보가 들어가 있다.
- ex) 메시지 body의 내용, 메시지 body의 크기, 압축, 인증, 요청 클라이언트(브라우저) 정보, 서버 애플리케이션 정보, 캐시 관리 정보 등)

### Message body

- body에는 실제 전송할 데이터를 넣는다.(HTML, 이미지, 영상, JSON 등 byte로 표현 가능한 모든 데이터)

## HTTP - 특징

### Stateful(상태 유지)

- 서버가 클라이언트의 상태를 보존한다.
- 클라이언트 1과 통신하고 있는 서버 A는 서버가 장애가 발생한 경우, 서버 B로 바뀔 수 없습니다.
→ 항상 같은 서버가 유지가 되어야 한다.
- 대표적인 프로토콜은 TCP
TCP는 세션 ‘상태’에 따라 Server의 응답이 달라지는 Stateful 프로토콜 입니다.

### Stateless(무상태)

- 서버가 클라이언트의 상태를 보존하지 않는다.
→ 서버의 응답이 client와의 세션 ‘상태’와 독립적이다.
- 서버는 단순히 요청이 오면 응답을 보내느 역화란 수행하며, 세션 관리는 클라이언트에 책임이 있습니다.
- 클라이언트 1과 통신하고 있는 서버A는 서버 장애가 발생한 경우, 서버 B로 바뀔 수 있다.
→ 아무 서버나 호출이 가능하다.
- 대표적인 프로토콜은 UDP, HTTP가 있습니다.

Stateless(무상태)는 놀고 있는 서버를 호출해도 아무 문제가 없다. 클라이언트가 서버를 호출할 때, 현재의 상태를 서버에게 모두 넘겨주기 때문이다. 이 경우 요청을 처리하던 서버에 문제가 발생해도, 클라이언트가 다른 서버를 호출해서 처리가 가능하다. 이런 이유, 무상태는 **Scale-out**(서버의 수평 확장)에 용이하다. 트래픽이 갑자기 몰리는 경우가 있다면, 서버를 잠깐 많이 붙이면 그만이다.

![image](https://github.com/user-attachments/assets/82d79e09-409a-4029-8785-a8745320e859)

1. **기본 동작**
    - 클라이언트 1이 서버 A에 요청을 보냅니다.
    - 서버 A는 요청을 정상적으로 처리합니다.
2. **장애 발생**
    - 서버 A가 장애를 일으켜 더 이상 요청을 처리할 수 없습니다.
    - 클라이언트의 요청은 로드 밸런서에 의해 서버 B로 전달됩니다.
    - 서버 B는 서버 A와 동일한 데이터를 가지고 있으므로 클라이언트 요청을 정상적으로 처리합니다.

### 주의해야할 점

모든 것을 무상태로 설계를 하면 어떻게 될 것인가?

단순히 화면만 보여주는 경우 무상태로 설계해도 가능하다. 하지만 로그인이 필요한 경우, 로그인했다는 상태를 서버에 유지해야한다.

HTTP 자체는 로그인 상태를 기억하지 않는데, 유지하는 방법으로는 브라우저 쿠키와 서버 세션 등을 사용하여 상태를 유지한다.

- **쿠키**: 로그인 후 세션 ID를 클라이언트 브라우저에 저장하고, 이후 요청마다 서버로 전송.
- **토큰:** 클라이언트가 토큰(JWT 등)을 저장하고, 요청마다 헤더에 포함시켜 서버에 보냄.

최종적으로는 상태 유지를 최소한으로(꼭 필요한 경우)만 사용하고, Stateless한 설계로 하는게 중요하다.

## HTTP/2

최초 출시된 HTTP버전은 HTTP/1.1 입니다.
HTTP/2는 HTTP/1.1의 업그레이드 버전인대, 데이터 전송 시스템을 수정하면서 효율성을 개선했습니다.
예를 들어 HTTP/1.1은 텍스트 형식으로 데이터를 교환 했지만, HTTP/2는 바이너리로 데이터를 교환하고 있습니다. 또한 서버가 새 HTTP 요청을 기다리는 대신, 클라이언트 캐시에 응답을 사전에 전송할 수 있습니다.

## HTTP/3

실시간 스트리밍 및 기타 최신 데이터 전송 요구 사항을 효울적으로 지원하는 것 입니다.