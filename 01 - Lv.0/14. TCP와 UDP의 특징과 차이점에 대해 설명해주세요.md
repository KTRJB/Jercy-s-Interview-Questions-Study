# TCP와 UDP: 전송 계층 프로토콜의 차이점 및 특징

![image](https://github.com/user-attachments/assets/8d07b952-dd2e-4368-b75f-25af3887e42f)

(이미지 출처: https://shlee0882.tistory.com/110)

인터넷 프로토콜 스택의 전송 계층에서 핵심적인 역할을 하는 **TCP(Transmission Control Protocol)**와 **UDP(User Datagram Protocol)**는 각각 연결형 서비스와 비연결형 서비스를 제공합니다. 본 아티클에서는 두 프로토콜의 특성과 차이점을 정리하고, 각각의 적합한 활용 사례를 제시합니다.

---

## **TCP와 UDP의 전송 계층 내 역할**

**OSI 7계층**의 전송 계층(Transport Layer)은 송신자와 수신자 간의 안정적 데이터 전달을 책임지며, 주요 기능은 다음과 같습니다:

	• 데이터 전송 경로 설정
	• 오류 제어 및 복구
	• 데이터 흐름 제어

TCP/IP 모델에서는 이 역할을 **TCP**와 **UDP** 두 가지 프로토콜이 수행합니다.

---

## **패킷 교환 방식: 데이터그램과 가상회선**

**TCP와 UDP의 가장 큰 차이**는 데이터를 처리하고 전송하는 방식에서 기인합니다. **TCP는 신뢰성과 순서를 보장**하기 위해 **가상회선 방식**을 채택한 반면, **UDP는 속도를 최우선**으로 하여 **데이터그램 방식**을 사용합니다.

![image](https://github.com/user-attachments/assets/d7ddded0-00c2-4b97-baf2-4acbf466196b)

(이미지 출처: https://woovictory.github.io/2018/12/28/Network-Packet-Switching-Method/)

**가상회선 패킷 교환 방식 (연결 지향형)**
	• 데이터 전송 전에 논리적 연결(가상회선)을 설정합니다.
	• 모든 패킷은 설정된 경로를 따라가며, 전송된 순서대로 도착합니다.
	• 경로 설정은 최초 연결 시 한 번만 수행됩니다.
	• **예:** TCP  

![image](https://github.com/user-attachments/assets/2b293a50-3a34-4a0c-b187-7f82cee87407)

(이미지 출처: https://woovictory.github.io/2018/12/28/Network-Packet-Switching-Method/)

**데이터그램 패킷 교환 방식 (비연결 지향형)**
	• 데이터 전송 전에 논리적 연결을 설정하지 않습니다.
	• 각 패킷은 독립적으로 전송되며, 라우터가 최적 경로를 선택합니다.
	• 동일한 메시지에서 분할된 여러 패킷이 서로 다른 경로로 전달될 수 있어 전송 순서와 도착 순서가 다를 수 있습니다.
	• **예:** UDP

---

## 연결 지향형 프로토콜과 비연결 지향형 프로토콜

네트워크 통신에서는 데이터를 전송하는 방식에 따라 연결 지향형 프로토콜과 비연결 지향형 프로토콜로 나뉩니다. 이 두 프로토콜은 데이터의 신뢰성과 전송 방식에서 큰 차이를 보입니다.

### 연결 지향형 프로토콜 (Connection-Oriented Protocol)

연결 지향형 프로토콜은 송신자와 수신자가 데이터를 교환하기 전에 먼저 연결을 설정한 뒤, 데이터를 주고받는 방식입니다. 이 방식은 안정성과 신뢰성을 보장하기 위해 설계되었습니다.

#### 특징
1. **연결 설정 및 해제**  
   데이터를 전송하기 전에 **3-way handshake** 과정을 통해 연결을 설정하고, 전송이 완료되면 연결을 해제합니다.
2. **데이터 전송 순서 보장**  
   전송한 데이터가 순서대로 도착하도록 보장하며, 누락된 데이터는 재전송 요청을 통해 복구합니다.
3. **신뢰성 보장**  
   데이터가 성공적으로 도착했는지 확인하며, 손실되거나 손상된 데이터는 재전송합니다.
4. **오류 제어 및 흐름 제어**  
   수신자의 데이터 처리 속도를 고려하여 데이터를 조절하며, 전송 중 발생할 수 있는 오류를 탐지하고 복구합니다.

#### 예시
- TCP(Transmission Control Protocol)  
  신뢰성이 중요한 파일 전송, 이메일, 웹 브라우징 등에 사용됩니다.

---

### 비연결 지향형 프로토콜 (Connectionless Protocol)

비연결 지향형 프로토콜은 데이터를 전송하기 전에 별도의 연결 설정 과정을 거치지 않고, 각각의 데이터를 독립적으로 처리합니다. 따라서 더 간단하고 빠른 데이터 전송이 가능합니다.

#### 특징
1. **연결 설정 없음**  
   연결을 설정하지 않으며, 데이터 전송 자체가 독립적으로 이루어집니다.
2. **데이터 전송 순서 보장 없음**  
   전송한 데이터가 순서대로 도착하지 않을 수 있습니다.
3. **신뢰성 낮음**  
   데이터 손실, 손상, 중복 등을 확인하거나 복구하는 기능이 없습니다.
4. **속도 우선**  
   추가적인 확인 절차가 없으므로 속도가 빠르며, 실시간 데이터 전송에 적합합니다.

#### 예시
- UDP(User Datagram Protocol)  
  실시간 스트리밍, 온라인 게임, VoIP(Voice over IP)와 같이 신속성이 요구되는 서비스에서 사용됩니다.

---

## **TCP: 신뢰성을 보장하는 연결 지향형 프로토콜

**TCP**는 연결형 서비스를 제공하며, 데이터 전송의 신뢰성을 보장하기 위해 다양한 기능을 수행합니다.

### 주요 특징

1. **가상 회선 방식**: 3-way handshake로 연결을 설정하고, 4-way handshake로 연결을 해제합니다.
2. **흐름 제어 및 혼잡 제어**: 데이터 손실 및 네트워크 과부하를 방지합니다.
3. **높은 신뢰성**: 전송 데이터의 순서 및 정확성을 보장합니다.
4. **전이중 통신 지원**: 데이터가 양방향으로 동시에 전달될 수 있습니다.

---

### **TCP 연결 및 해제 과정**
#### **연결: 3-way Handshake**

![image](https://github.com/user-attachments/assets/5027840b-6f6e-4770-9ee4-b134cd6274b5)

(이미지 출처: https://dev-coco.tistory.com/144)

```
SYN(synchronize sequence numbers): 연결 확인을 보내는 무작위의 숫자 값
ACK(acknowledgements): 클라이언트 혹은 서버로부터 SYN에 1을 더해 SYN을 잘 받았다는 응답
```

1. **SYN**: 클라이언트가 서버에 연결 요청을 보냅니다.
2. **SYN+ACK**: 서버가 요청을 승인하고 클라이언트로 응답합니다.
3. **ACK**: 클라이언트가 서버의 응답을 확인하며 연결이 완료됩니다.

#### **해제: 4-way Handshake**

![image](https://github.com/user-attachments/assets/e43d190f-c76f-4571-be0a-045c1bb563fc)

(이미지 출처: https://dev-coco.tistory.com/144)

1. 클라이언트가 FIN 패킷을 서버로 전송하며 연결 종료를 요청합니다.
2. 서버가 FIN을 수신 후 ACK로 응답합니다.
3. 서버도 FIN 패킷을 전송하며 종료를 알립니다.
4. 클라이언트가 최종 ACK를 서버로 전송하며 연결이 종료됩니다.

```
# TIME-WAIT

- TIME-WAIT 상태는 연결을 먼저 끊은 쪽에서 생성되는 소켓으로, 모든 FIN에 대한 ACK를 받고 연결 종료가 완료된 상태입니다.
- 이는 전송 실패나 패킷 손실을 방지하기 위해 일정 시간 기다린 후 CLOSED 상태로 전이됩니다.
- TIME-WAIT 상태가 없으면, 이전 연결의 FIN 패킷이 네트워크에 남아 있을 수 있습니다. 이로 인해 새로운 연결에서 같은 포트 번호를 사용하려 할 때, 이전 연결의 데이터가 섞이거나 충돌할 위험이 있습니다. 또한, 새로 시작된 연결에서 패킷 손실이나 잘못된 종료 상태로 인해 연결 해제가 제대로 이루어지지 않을 수 있습니다.
- TIME-WAIT은 이런 문제를 방지하기 위해 일정 시간 대기하며, 이전 연결의 상태가 안정화되도록 합니다.
```

---

## **UDP: 빠른 데이터 전송을 위한 비연결 지향형 프로토콜

**UDP**는 비연결형 서비스로, 데이터그램 방식을 사용합니다. 이는 각 패킷이 독립적으로 전송되고, 전송 순서가 보장되지 않는 특징을 가집니다.

### 주요 특징

1. **데이터그램 방식**: 연결 설정 없이 데이터를 송신합니다.
2. **수신 여부 확인 없음**: 흐름 제어나 오류 복구 기능이 없습니다.
3. **빠른 전송 속도**: 네트워크 오버헤드가 적어 TCP보다 속도가 빠릅니다.
4. **다대다 통신 지원**: 1:1, 1:N, N:N 통신이 가능합니다.

---

### **TCP와 UDP의 주요 차이점**

| **특징**    | **TCP**            | **UDP**          |
| --------- | ------------------ | ---------------- |
| 연결 방식     | 연결 지향형 프로토콜        | 비연결 지향형 프로토콜     |
| 패킷 교환 방식  | 가상 회선 방식           | 데이터그램 방식         |
| 데이터 전송 순서 | 보장                 | 보장하지 않음          |
| 수신 여부 확인  | 확인                 | 미확인              |
| 신뢰성       | 높음                 | 낮음               |
| 속도        | 느림                 | 빠름               |
| 통신 방식     | 1:1                | 1:1, 1:N, N:N    |
| 활용 사례     | 파일 전송, 이메일, HTTP 등 | 스트리밍, VoIP, 게임 등 |

---

## **TCP와 UDP가 적합한 사용 사례**

TCP와 UDP는 서로 다른 요구 사항을 충족하기 위해 설계된 전송 계층 프로토콜입니다. TCP는 신뢰성이 중요한 파일 전송과 웹 브라우징에 적합하며, UDP는 실시간 서비스 및 속도가 요구되는 애플리케이션에 최적화되어 있습니다. 사용 목적에 따라 적절한 프로토콜을 선택하는 것이 네트워크 설계 및 애플리케이션 성능에 중요한 영향을 미칩니다.

---

## 참고 문서

1. [TCP와 UDP의 차이점 - 망큐의 개발로그](https://mangkyu.tistory.com/15)  
2. [TCP와 UDP 비교 - 히데의 개발 블로그](https://velog.io/@hidaehyunlee/TCP-%EC%99%80-UDP-%EC%9D%98-%EC%B0%A8%EC%9D%B4)  
3. [TCP와 UDP의 차이 - 성온이온의 블로그](https://seongonion.tistory.com/74)  
4. [TCP와 UDP 상세 비교 - 슬기로운 개발생활](https://dev-coco.tistory.com/144)  
5. [TCP와 UDP 프로토콜의 차이점 - 신영훈의 블로그](https://shlee0882.tistory.com/110)  
6. [패킷 교환 방식 (데이터그램과 가상회선) - 우승빅토리의 블로그](https://woovictory.github.io/2018/12/28/Network-Packet-Switching-Method/)  
