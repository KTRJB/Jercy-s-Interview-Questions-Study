# HTTP 메서드

## HTTP란?

- Hypertext Transfer Protocol의 약자
- 클라이언트와 서버 간 데이터 전송을 위한 주요 프로토콜
- 상태가 없는(stateless) 요청-응답 모델 사용
- REST API의 기본 통신 방식

## 주요 HTTP 메서드

### GET

- 목적: 데이터 조회
- 특징:
    - 서버의 데이터를 읽기만 함
    - 요청 본문(body) 불필요
    - 안전한 메서드(Safe)
    - 멱등성 보장
- 예시: `/products`, `/products/123`

### POST

- 목적: 새로운 리소스 생성
- 특징:
    - 요청 본문에 생성할 데이터 포함
    - 안전하지 않은 메서드
    - 멱등성 보장되지 않음
- 예시:

```json
json
Copy
POST /products
{
  "name": "Sneakers",
  "color": "blue",
  "price": 59.95
}

```

### PUT

- 목적: 리소스 전체 교체
- 특징:
    - 기존 리소스를 완전히 새로운 버전으로 교체
    - 모든 필드를 포함해야 함
    - 멱등성 보장
- 예시: 전체 제품 정보 업데이트

### PATCH

- 목적: 리소스 부분 수정
- 특징:
    - 특정 필드만 업데이트 가능
    - PUT보다 효율적
    - 멱등성이 보장되지 않을 수 있음
- 예시: 제품 가격만 변경

### DELETE

- 목적: 리소스 삭제
- 특징:
    - 지정된 리소스 제거
    - 멱등성 보장
- 예시: `/products/123` 제품 삭제

## 메서드 특성

### 안전성(Safe)

- GET: 읽기 전용 작업만 수행
- HEAD: 헤더 정보만 조회

### 멱등성(Idempotent)

- 여러 번 호출해도 동일한 결과를 보장
- 멱등성 보장: GET, PUT, DELETE
- 멱등성 미보장: POST
- PATCH: 상황에 따라 다름

# 멱등성(Idempotency)

## 기본 개념

- 동일한 연산을 여러 번 수행해도 결과가 달라지지 않는 성질
- 네트워크 지연, 중복 요청 등의 문제 해결에 중요
- 분산 시스템과 마이크로서비스 아키텍처에서 특히 중요

## 중요성

- 데이터 일관성 유지
- 중복 처리 방지
- 시스템 안정성 확보
- 예측 가능한 동작 보장

## 실제 적용 사례

### 1. 은행 거래 시스템

- 중복 이체 방지
- 트랜잭션 아이디로 중복 요청 관리
- 금융 거래의 정확성과 안정성 보장

### 2. API 설계

- HTTP 메소드별 멱등성 특성:
    - GET: 멱등성 보장 (조회)
    - PUT/DELETE: 멱등성 보장
    - POST: 멱등성 미보장 (리소스 생성)
    - PATCH: 그때그때 다름.

# PATCH의 멱등성

## 기본 특성

- PATCH는 상황에 따라 멱등성이 달라질 수 있음
- 연산의 종류에 따라 멱등 여부가 결정됨

## 멱등한 PATCH의 예

```json
json
Copy
PATCH /users/123
{
    "name": "John",// 특정 값으로 설정
    "status": "active"// 특정 값으로 설정
}

```

- 절대값으로 업데이트하는 경우 멱등성 보장
- 여러 번 호출해도 같은 결과

## 비멱등한 PATCH의 예

```json
json
Copy
PATCH /users/123
{
    "score": score + 10,// 증분 연산
    "attempts": attempts + 1// 증분 연산
}

```

- 상대값으로 업데이트하는 경우 멱등성 미보장
- 호출할 때마다 값이 변경됨
