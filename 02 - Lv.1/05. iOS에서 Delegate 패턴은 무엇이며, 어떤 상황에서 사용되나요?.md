## Delegate 패턴

- Delegate 패턴은 객체 간 통신을 위한 디자인 패턴으로, **한 객체가 특정 작업이나 이벤트를 다른 객체에게 위임하는 방식**
- Delegate 패턴은 특정 객체(delegator)가 다른 객체(delegate)에게 특정 이벤트나 작업의 처리를 위임하는 패턴
- delegator는 작업을 위임할 delegate 객체를 참조하고, delegate는 위임된 작업을 처리하기 위한 메서드를 구현

### 주요 특징

- 일반적으로 프로토콜(protocol)을 통해 구현됩니다
- 1:1 관계를 형성합니다
- **약한 참조(weak reference)를 사용하여 메모리 순환 참조를 방지**합니다

### 사용되는 상황

1. **UI 컴포넌트의 이벤트 처리**: UITableView, UICollectionView 등의 데이터 표시와 사용자 상호작용을 처리할 때
2. **비동기 작업의 결과 전달**: 네트워크 요청이나 파일 처리와 같은 비동기 작업의 완료를 알릴 때
3. **컴포넌트 간 결합도 감소**: 모듈 간의 의존성을 줄이고 코드의 재사용성을 높일 때
4. **사용자 정의 이벤트 처리**: 커스텀 UI 컴포넌트에서 발생하는 이벤트를 처리할 때

## Delegate 패턴과 Notification, KVO의 차이점은 무엇인가요?

세 가지 메커니즘 모두 iOS에서 객체 간 통신을 위해 사용되지만, 다양한 상황에 맞게 각각 다른 특징을 가지고 있습니다.

### 1. Delegate 패턴

- **통신 방식**: 1:1 통신
- **구현 방식**: 프로토콜을 통한 명시적 계약
- **관계**: 직접적인 참조 관계 (weak reference 권장)
- **용도**: 특정 객체의 동작을 다른 객체에게 위임할 때
- **동기/비동기**: 동기적 호출이 일반적
- **예시**: UITableViewDelegate, UICollectionViewDelegate

### 2. Notification

- **통신 방식**: 1:N 통신
- **구현 방식**: 문자열 키를 통한 이벤트 구독
- **관계**: 느슨한 결합 (발신자와 수신자 간 직접적 참조 없음)
- **용도**: 여러 객체에게 동일한 이벤트를 알릴 때
- **동기/비동기**: 동기적 (기본), 비동기적 옵션 있음
- **예시**: 키보드 표시/숨김, 앱 생명주기 이벤트

### 3. KVO (Key-Value Observing)

- **통신 방식**: 1:N 통신 (속성 변경 감시)
- **구현 방식**: 키 경로(key path)를 통한 속성 관찰
- **관계**: 관찰자와 관찰 대상 간의 직접적 참조
- **용도**: 특정 객체의 속성 변화를 감지할 때
- **동기/비동기**: 대부분 동기적
- **예시**: 모델 객체의 상태 변화 감지, 시스템 프레임워크 객체의 속성 관찰

### 선택 기준

1. **Delegate**
    - 특정 객체의 동작을 다른 객체가 제어해야 할 때
    - 강력한 타입 안전성이 필요할 때
    - 1:1 통신이 필요할 때
2. **Notification**
    - 여러 객체에게 동일한 이벤트를 알려야 할 때
    - 발신자와 수신자 간 직접적인 참조를 피하고 싶을 때
    - 시스템 이벤트에 반응해야 할 때
3. **KVO**
    - 객체의 특정 속성 변화를 관찰해야 할 때
    - Core Data와 같은 KVO에 의존하는 프레임워크와 작업할 때
    - 다른 객체의 내부 상태 변화를 감지해야 할 때

## 프로토콜을 활용한 Delegate 패턴 구현 방법을 설명해주세요.

### 프로토콜 정의

먼저 delegate가 구현해야 할 메서드를 포함하는 프로토콜을 정의합니다. 메모리 관리를 위해 AnyObject를 상속하여 클래스만 이 프로토콜을 채택할 수 있도록 합니다. 프로토콜 이름은 일반적으로 'Delegate' 접미사를 사용하며, 메서드 이름은 '무엇이 일어났는지(did, will, should)'를 명확히 표현합니다.

### Delegator 클래스 구현

delegate 속성을 가지고 있는 클래스를 만듭니다. 메모리 순환 참조를 방지하기 위해 delegate 속성을 weak로 선언합니다. 이 클래스는 자신의 주요 기능을 수행하면서 적절한 시점에 delegate의 메서드를 호출하여 이벤트를 알립니다.

### Delegate 구현

delegate 프로토콜을 채택하는 클래스를 구현합니다. 이 클래스는 delegator의 delegate 속성에 자신을 할당하고, 프로토콜에 정의된 메서드를 구현하여 delegator로부터 전달되는 이벤트에 반응합니다.

### 주요 구현 패턴 및 모범 사례

1. **명명 규칙**:
    - 프로토콜 이름은 보통 'Delegate' 접미사를 사용합니다.
    - 메서드 이름은 보통 '무엇이 일어났는지(did, will, should)'를 명확히 표현합니다.
    - 관련 객체를 첫 매개변수로 전달하는 것이 일반적입니다.
2. **메모리 관리**:
    - delegate 속성은 항상 weak로 선언하여 순환 참조를 방지합니다.
    - AnyObject 프로토콜 상속을 통해 클래스만 delegate가 될 수 있도록 합니다.
3. **선택적 메서드**:
    - 선택적 메서드를 사용하려면 @objc 속성을 추가하고 Objective-C 런타임을 활용해야 합니다.
    - 필수 메서드가 아닌 경우 선택적으로 구현할 수 있도록 설계합니다.
    - extention 하는 방법도 존재
4. **다중 delegate**:
    - 필요한 경우 배열이나 다른 컬렉션을 사용하여 여러 delegate를 관리할 수 있습니다.
5. **데이터 전달**:
    - delegate 메서드를 통해 필요한 데이터를 함께 전달합니다.
    - 복잡한 데이터는 별도의 모델 객체로 캡슐화하여 전달합니다.
